!function(a){var c,b={url:"",container:null},d={init:function(c){b=a.extend({},b,c)},getCourses:function(a){var c=""+b.url;l(a,"courseAreaId")&&(c=c+"/"+a.courseAreaId),l(a,"page")&&(c=c+"/"+a.page);var d=j(this,a);k(c,d)},getEvents:function(a){var c=""+b.url;l(a,"courseId")&&(c=c+"/"+a.courseId),l(a,"page")&&(c=c+"/"+a.page);var d=j(this,a);k(c,d)},autoRender:function(b,d){c=d,a(b).find("[ls-object]").each(function(){f(a(this),d)}),a(b).find("[ls-repeat]").each(function(){e(a(this),d)})}},e=function(b,c){b.hide();var d=c;"[object Array]"!==Object.prototype.toString.call(d)&&(d=c[b.attr("ls-repeat")]);var e="undefined"!=typeof b.attr("ls-repeat-max")?b.attr("ls-repeat-max"):d.length;e>d.length?e=d.length:d.length>e&&d.splice(0,d.length-1);var f=!1;for(var i in d)"string"!=typeof i||a.isNumeric(i)||(f=!0);var j=[];if(f)for(var i in d){var l=b.clone(!0);l.attr("id",""),g(l,{key:i,value:d[i]}),h(l,{key:i,value:d[i]}),l.show(),l.removeAttr("ls-repeat ls-repeat-max"),j.push(l)}else for(var k=0;k<e;k++){var l=b.clone(!0);l.attr("id",""),g(l,d[k]),h(l,d[k]),l.show(),l.removeAttr("ls-repeat ls-repeat-max"),j.push(l)}b.after(j),b.remove()},f=function(a,b){var c=a.attr("ls-object");g(a,b,c),h(a,b,c),a.show()},g=function(b,c,d){"undefined"!=typeof d&&null!=d&&""!==d&&(c=c[d]),b.find("[ls-field]").each(function(){var b=i(c,a(this).attr("ls-field"));"undefined"!=typeof a(this).attr("ls-format")&&""!==b&&("undefined"==typeof moment?console.warn("moment.js is required for date/time formatting: http://momentjs.com"):b=moment(b).format(a(this).attr("ls-format"))),"false"===a(this).attr("ls-escape")?a(this).html(b):a(this).text(b),a(this).removeAttr("ls-field ls-format")})},h=function(b,d,e){"undefined"!=typeof e&&null!=e&&""!==e&&(d=d[e]);var f=""+b.html(),g=f.match(/{!([\$0-9a-zA-Z_\.]+)}/gi);if(null!=g){for(var h=0;h<g.length;h++){var j=g[h].substring(2,g[h].length-1),k=0===j.indexOf("$")?c:d;0===j.indexOf("$")&&(j=j.substring(1));var l=i(k,j),m=a("<span/>").text(l).text();f=f.replace(g[h],m)}b.html(f)}},i=function(a,b){for(var c=b.split("."),d=0;d<c.length-1;d++){if("undefined"==typeof a[c[d]])return"";a=a[c[d]]}return a[c[c.length-1]]},j=function(a,b){var c;if(l(b,"onSuccess")&&(c=b.onSuccess),!l(b,"autoRender")||b.autoRender===!0){var e,f;"undefined"!=typeof c&&null!==c&&(e=c.clone()),l(b,"beforeRender")&&(f=b.beforeRender),c=function(b){"function"==typeof f&&f(b),d.autoRender(a,b),"function"==typeof e&&e(b)}}return c},k=function(b,c){a.ajax({type:"GET",url:b,dataType:"json",success:c,error:function(a,b,c,d){alert("Callout to REST API Failed."),console.error(a),console.error(b),console.error(c),console.error(d)}})},l=function(a,b){return"undefined"!=typeof a&&"undefined"!=typeof a[b]&&a[b]};Function.prototype.clone=function(){var a=this,b=function(){return a.apply(this,arguments)};for(var c in this)this.hasOwnProperty(c)&&(b[c]=this[c]);return b},a.fn.LearnsmarterREST=function(b){return d[b]?d[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on LearnsmarterREST"):d.init.apply(this,arguments)}}(jQuery);
